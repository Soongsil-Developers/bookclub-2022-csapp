# part B - trans를 변경하여 cache 친화적인 코드를 작성
- matrix transpose를 수행할때, cache miss를 최소화 하는것!
- 참고 : [SystemSoftware - Cache Memory #3 — 개발냥발 (tistory.com)](https://hyeo-noo.tistory.com/117)

- test-trans를 실행해보면 전치에 사용하는 cache가 s=5,e=1,b=5임을 알 수 있다.
- E=1이므로 각 set당 line이 하나 있는 직접매핑 캐시(e=1)이다.
- driver.py를 보면 총 3개의 행렬을 전치시키는것을 알수 있다.
- 32x32, 64x64, 61x67에 대한 지역성 코드를 써보자
- 우선 매트릭스의 모든부분을 한번에 계산하지 말고, 캐쉬라인 안에 들어가는 여러 부분을 나누어 계산한다.
- 61x67이 경우 8x8 부분으로 나누어 풀면 만점이 나온다.
- 32x32의 경우 8x8로 나누면 될거같았지만, eviction을 일으키게된다. 따라서 i == j인 경우를 맨 마지막에 따로 처리해주면 된다.
- 64x64의 경우 가까운 위치상의 엘리먼트들이 같은 set index를 공유하는 경우가 많다. 이 때, 4등분하여 8x8로 만들어야한다.
	- 윗쪽 반, 아랫쪽 반을 처리할때 set index를 기준으로 왼쪽 반과 오른쪽 반을 엑세스하게 되는데 이때, eviction이 무조건 일어난다. 따라서 미리 변수들을 캐시해놓는 장치를 한다. square_hard의 첫번째줄을 미리 캐싱을 하여 캐싱된 줄들을 사용한다.